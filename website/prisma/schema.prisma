// This is your Prisma schema file
// Learn more: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(auto()) @map("_id") @db.ObjectId
  email        String
  clerk_id     String        @unique
  name         String
  type         String
  iscompany    Boolean
  ishr         Boolean
  phone        String
  companyCode  String?
  createdAt    DateTime      @default(now())

  applications Application[]
  jobPosts     JobPost[]     @relation("UserJobPosts")
}

model JobPost {
  id            String        @id @default(auto()) @map("_id") @db.ObjectId
  title         String
  description   String
  jobType       String
  location      String
  noOfOpenings  Int
  status        String        @default("open")
  deadline      DateTime
  createdAt     DateTime      @default(now())
  createdById   String        @db.ObjectId

  createdBy     User          @relation("UserJobPosts", fields: [createdById], references: [id])
  applications  Application[]
}

model Application {
  id              String     @id @default(auto()) @map("_id") @db.ObjectId
  user_id         String     @db.ObjectId
  job_id          String     @db.ObjectId
  firstName       String
  lastName        String
  email           String
  phone           String
  s3FileKey       String
  status          String
  experience      String
  interview_date  DateTime
  offerletter     Boolean
  immediateJoiner Boolean
  resume_details  String
  createdAt       DateTime   @default(now())

  user            User       @relation(fields: [user_id], references: [id])
  job             JobPost    @relation(fields: [job_id], references: [id])
}

